# CHANGELOG @dictadata/storage-junctions

- version 0.9.119
  - feature: ElasticsearchJunction implement neq, in, exists pattern operators
  - refactor: junction.dull match: "*" to truncate source
  - bug fix: Engram get_uid() return null when no fields found and key contains literals
  - updated: @dictadata/lib dot, evaluate, match
- version 0.9.118
  - bug fix: refactor options.max_read to options.count for compatibility with database readers
- version 0.9.117
  - feature: elasticsearch, mysql store() options.update, options.withUpdate, default insert
  - bug fix: elasticsearch, mysql retrieve() retrieve all with undefined pattern
  - refactor: adjoin transform set default lookup count: 1000
  - refactor: reader/writer adjust logger.verbose _stats output
- version 0.9.116
  - feature: implement text-junction and null-junction
  - refactor: use a Map for groupby data structure
  - refactor: junction reader/writer _stats
- version 0.9.115
  - refactor: aggregate transform
  - refactor: keywords can contain alphanumeric ' ', '_', '-', ','
  - refactor: csv use quotes for keyword fields
  - bug fix: StorageError instantiation in junctions
- version 0.9.114
  - refactor: moved utils modules to @dictadata/lib project
  - refactor: mutate transform, in evaluate expression use string.replace and implement padding, e.g. =field/regexp/replace:padding
  - testing: tr_launcher.js support for "cwd" in launch.json
- version 0.9.113
  - refactor: mutate transform, rename operations func, assign; add list (array)
  - bug fix: CSV use engram field names for default headers values
  - testing: refactor compare(output, expected, comparValues)
- version 0.9.112
  - feature: codify options missingValue, defaultType
  - refactor: remove getEngram() for file based storage junctions
  - refactor: rename ShapeFile to Shapefile
- version 0.9.111
  - refactor: StorageError constructor() and toJSON()
- version 0.9.110
  - feature: implement tee transform
  - feature: storage-junction storeBulk fill-in
  - feature: implement codify action terminal.smt
  - refactor: move mssql-junction to it's own plugin project
  - bug fix: elasticsearch-junction fix dull by pattern
  - bug fix: transforms _flush()
  - bug fix: mysql-junction log errors
- version 0.9.109
  - feature: implement TemplateJunction, write data into a JSON doc using a JSON template
  - refactor: dot and replace utilities
  - refactor: rename options.extract to options.pick
- version 0.9.108
  - feature: RESTjunction add retries option for HTTP status >= 500
  - refactor: change domain to realm
  - refactor: adjoin transform remove lookup_table object around smt
  - refactor: refactor dot.get() and dot.set()
- version 0.9.107
  - bug fix: regexp expressions in filter and mutate transforms
  - refactor: refactor dot.get into a project module
- version 0.9.106
  - feature: counter transform
  - refactor: Storage activate method
  - refactor: put evaluate and match function in utils
  - bug fix: replace subst with substring
- version 0.9.105
  - refactor: adjoin transform (lookup table)
- version 0.9.104
  - feature: support ? as a wildcard for list() methods
  - feature: findModules() utility to find node_modules folder from cwd
- version 0.9.103
  - feature: implement smt $ model with options.junction
- version 0.9.102
  - refactor: refactor .encoding.json to .engram.json
- version 0.9.101
  - refactor: implement StorageWriter _construct()
  - refactor: StorageWriter autoClose option for dependent write streams
  - refactor: change all  logger.error to logger.warn
- version 0.9.100
  - refactor: refactor tract.transforms to array
- version 0.9.99
  - republish
- version 0.9.98
  - refactor: reorg storage-junction and storage-tracts projects
- version 0.9.97
  - refactor: change Storage to be part of library interface
  - refactor: revamp Engrams interface for auth, engrams
  - testing: remove origin server from automatic testing
- version 0.9.96
  - refactor: improved, consistent error handling
- version 0.9.95
  - refactor: rename internal Cortex class to Campus (hippocampus)
- version 0.9.94
  -
- version 0.9.93
  - testing updates for engrams storage
- version 0.9.92
  - bug fix: have process.env.HOMEPATH take precedence over os.homedir()
- version 0.9.91
  - bug fix: add logger to auth_entries module
- version 0.9.90
  - bug fix: engrams connection, issue overwriting options.tls.ca with file contents
- version 0.9.89
  - refactor: rebrand to dictadata.net for all web sites and URL's
  - feature: support TLS options for Elasticsearch and MySQL connections
  - refactor: update to mysql2 package
- version 0.9.88
  - refactor: StorageResults properties
  - bug fix: CSVReader, JSONReader handling of count > max
- version 0.9.87
  - bug fix: set parser options for jsonl and jsons streams
- version 0.9.86
  - rename StorageResponse to StorageResults for naming consistency
- version 0.9.85
  - refactor: add type property to StorageResults; list, map, construct and message
  - refactor: adjust junction responses to set response type
  - bug fix: invalid SQL retrieving empty match: {}
  - bug fix: CSV usage of options.header and options.headers
- version 0.9.84
  - feature: parse delimited numbers from text sources
  - refactor: field properties hasDefault, isNullable
  - refactor: handling of missing values, nulls and default values
  - bug fix: dictadata storage type is "number" (not float)
  - testing: fix issue downloading single file via HTTP
- version 0.9.83
  - new versioning
  - testing: debug output; compare functions

- version 2.5.3
  - explicit passing of options.pattern argument, don't overload options object
- version 2.5.2
  - Breaking changes:
    - MutateTransform replaces SelectTransform; renamed options
    - refactor: rename StorageResults.resultText to StorageResults.resultMessage
  - feature: new transforms RowConstructs (arrays), MapConstructs (map/object)
  - feature: new StreamFileSystem "stream:*" for reading/writing to any provided stream
  - enhancement: support function body definitions in MutateTransform assignments
  - enhancement: support regular expressions in FilterTransform expressions
  - refactor: using '*' instead of 'any' for generic smt models
  - refactor: HttpFileSystem options rename urlParams to urlReplace
  - refactor: HttpRequest responses include httpVersion, statusMessage
  - bug fix: HttpFileSystem list directory using basic-ftp entry.type
- version 2.5.0
  - stable build of engrams with smt_urn and auth_entries
- version 2.4.3
  - refactor: add auth property to auth_entries objects
- version 2.4.2
  - refactor: Engrams key replace smt_id with smt_urn
- version 2.4.1
  - feature: Engrams.auth for username/passwords, apiKey, etc.
  - refactor: use basic-ftp in place of promise-ftp
  - testing: use dev.dictadata.net instead of localhost in test URL's
- version 2.4.0
  - feature: smt_urn used as key for engrams directory
- version 2.3.4
  - refactor: add realm and roles to engrams entry
- version 2.3.3
  - enhancement: Engrams.store() validate entry's name and type
  - refactor: add source and notes to engrams entry, remove alias_smt
- version 2.3.2
  - feature: full-text search pattern syntax and elasticsearch-junction
- version 2.3.1
  - enhancement: CsvJunction supports other delimited files
  - enhancement: CsvJunction check input for BOM character
  - enhancement: match field expression, support array values (OR); { field: [value, ...] }
  - testing: compare .csv and .txt files line-by-line
- version 2.3.0
  - feature: new AdjoinTransform for injecting fields via table/map lookup
  - feature: CsvJunction and JsonJunction retrieve()
  - feature: URL template string style replacement for RestJunction, ConjoinTransform
  - refactor: StorageEncoder base class for filesystem based streams for cast, filter, select functions
  - refactor: use StorageEncoder for CsvReader, JsonReader
  - refactor: make Storage.activateTransform() an async function
  - bug fix: CsvReader and JsonReader stream issues
  - bug fix: ConjoinTransform bug fix in pattern match
  - bug fix: issue with httpRequest querystring params
  - bug fix: issue with ElasticsearchReader sort order
  - testing: compare output of filesystem based transfer tests
- version 2.2.5
  - enhancement: engrams alias entries
- version 2.2.4
  - enhancement: shapefile junction with .zip files, use smt.schema of '$1' to find first .shp file in zip container
  - enhancement: zip filesystem, parse addtional path after .zip filename as prefix for accessing files in zip container
  - refactor: filesystem copy functions options.use_rpath for making destination path
  - bug fix: improve handling HTTP responses with content-encoding (compressed HTTP message body)
  - bug fix: improve handling of stream errors
- version 2.2.3
  - enhancement: add options to Engram engrams properties, passed to storage-junctions by campus.activate
  - bug fix: Elasticsearch DSL queries for patterns with "eq", "neq"
  - testing: tr_launcher testing parameters
- version 2.2.1
  - refactor: Storage module, Campus and Engrams classes
- version 2.1.6
  - update required node engine >= 16.4
- version 2.1.5
  - encoding.smt.key, if defined and more specific, takes precedence over junction's engram.smt.key
  - rename tiger2023 schemas
- version 2.1.4
  - bug fix: type checking of storage types should be case insensitive
- version 2.1.3
  - bug fix: check return code on engrams calls
  - testing: ftp tests use IPv4
- version 2.1.2
  - refactor: engrams function parameters
- version 2.1.1
  - refactor: engrams entry is an engram definition
- version 2.1.0
  - refactor: Storage, Campus classes; remove engrams class
  - refactor: parseSMT() to class SMT
- version 2.0.8
  - bug fix: passing options thru engrams to underlying junction
  - enhancement: dependencies for tedious and elasticsearch client
- version 2.0.7
  - bug fix: check results before caching during recall()
  - enhancement: automatic index refresh option to elasticsearch junction
  - testing: only test local ftp site
- version 2.0.6
  - bug fix: MySQL create new StorageError()
- version 2.0.5
  - bug fixes: stream error handling; use of field.name property
- version 2.0.4
  - fix bug in recall engrams entry from cache
- version 2.0.3
  - fix engrams methods to return results object
- version 2.0.2
  - storatge/campus/engrams integration testing and updates
- version 2.0.1
  - improve logic in Engram.encoding setter
- version 2.0.0
  - implement Engrams class
  - change encoding fields to an array
  - define engrams storage: engrams.engram.json
  - store engrams entries in Elasticsearch
- version 1.8.6
  - support Elasticsearch geo_shape queries; contains, within, intersects, disjoint
- version 1.8.5
  - implement dot notation for filter transform
  - testing:
    - fix issue with date comparisons
    - refactoring of /var/dictadata/country/state directory naming convention
  - code cleanup
- version 1.8.4
  - update dependencies
  - testing updates:
    - standardize file name convention for encoding as abc123.engram.json
- version 1.8.3
  - extensive testing and bug fixes
- version 1.8.2
  - update to encoder transform initialization
- version 1.8.1
  - reduce package size by removing uneeded test files
  - move oracledb-junction to it's own plugin project
- version 1.8.0
  - filesystem getFile/putFile methods, replaces download/upload methods
  - ZipFileSystem read-only implemention
  - ShapefileJunction read-only implemention
  - add new geometry storage type
  - Elasticsearch geoJSON support
  - updated project index pages for /types and / utils
  - optimized schema encodings by reducing default member fields in .json encoding files
  - enhanced dot notation for keys and select fields
  - new utils method parseSMT()
  - updated test data and scripts
- version 1.7.5
  - implement junction capabilities
  - improvements to REST junction and httpRequest for querystring and web form parameters
- version 1.7.4
  - update test/tr_launcher.js program
  - update dependencies
- version 1.7.3
  - httpRequest improvements
- version 1.7.2
  - StorageResults updates
- version 1.7.1
  - export tests lib
- version 1.7.0
  - refactoring of project files
  - all async methods now return a StorageResults object or throw a StorageError object
  - automated testing implemented
  - moved S3-FileSystem and XlsxJunction to separate plugin projects
- version 1.5.1
  - add encodings for SQL indexes in addition to primary key index
  - add junction encoding getter/setter and createSchema/dullSchema methods
  - automated testing scripts
  - add simple metrics for transfer streams
  - bug fixes and enhancements to encoding values for storage
- version 1.4.11
  - only perform DB update if there are none-key columns
- version 1.4.10
  - customizable stringBreakpoints for sizing database string types
  - improved handling of date strings
- version 1.4.9
  - implement Oracle bulk loading
- version 1.4.8
  - support for default Oracle dates "DD-MON-YY" and "DD-MON-YY HH:MI:SS"
- version 1.4.7
  - add storeBulk method for mysql-junction and mssql-junction
- version 1.4.6
  - add setter for field.isKey
- version 1.4.5
  - primary key ordinals
  - add compose and decompose (flatten) tranforms
  - add encoder transform
  - json reader options.pick for chosing a JSON input array
  - json writer options.formation for structure of json output file
  - add splitter-junction to divide a stream into multiple outputs
- version 1.4.4
  - fix bug with Oracle PRIMARY KEY clause
  - fix bug in aggregate w/ group by
- version 1.4.3
  - update dependency for aws-sdk
- version 1.4.2
  - updated dependencies for tedious (mssql), node-html-parser
- version 1.4.1
  - prefer INSERT then UPDATE in store() for mssql and oracle junctions
  - use PRIMARY KEY clause for Oracle CREATE TABLE instead of column property
- version 1.4.0
  - implement OracleDBJunction
  - introduce support for case-insensitive field encodings
  - bug fixes for overlay encodings
- version 1.3.2
  - enhanced implementation of map and list storage types
  - overlay encoding on data source, e.g. nested storage encoding on a SQL table
  - enchance support for map and list types when codifying a data source
  - bug fixes for SQL statement generation
- version 1.3.1
  - bug fixes for SQL create table statements
- version 1.3.0
  - support for Microsoft SQL Server (mssql)
- version 1.2.8
  - use smt.key value(s) to set field.isKey encoding
  - fix WHERE clause in mssql UPDATE statements
- version 1.2.7
  - implement MSSQLJunction for Microsoft SQL Server
  - implement "wc" wildcard filter expression
- version 1.2.6
  - StorageWriter classes will not write empty constructs to destination storage.
- version 1.2.5
  - Breaking Changes:
    - default for csv files is now no header. Add options.csvHeader to read/write first line with header.
  - implement options.csvHeader for csv files
- version 1.2.4
  - fix bug with validating file schema extension names
- version 1.2.3
  - republish as 1.2.3
- version 1.2.2
  - node 15.0.1 promises
  - updates for CsvParser encoder
- version 1.2.1
  - FileSystem class interface
    - add upload() and download() methods
  - implement upload and download methods in current FileSystem classes file, ftp, http, S3
  - implement HttpFileSystem to list HTML directory pages, create read streams and download files
  - change junction model "shapes" to "shp"
- version 1.2.0
  - Breaking Changes:
    - refactor FileStorage classes to FileSystem classes
  - Storage module, storage/index.js library interface
    - add a generic StorageJunction * model for use with FileSystems
    - export FileSystem base class for creating FileSystem plugins
    - FileSystems add() method specifies which junctions models use file systems
- version 1.1.8
  - updated dependencies
- version 1.1.7
  - storage readers support for pattern filter
  - implement aggregate transform class
  - implement tee transform
  - introduce a shortened storage encoding
  - match filter supports regex
  - consistent StoreageResult responses
  - mysql use TINYINT(1) for BOOLEAN
  - Breaking changes:
  - remove pattern.cues property
  - rename consolidate to aggregate
  - rename float to number
  - refactor transform options properties
- version 1.1.6
  - Breaking changes:
  - SelectTransform replaces FieldsTransform
  - in SelectTransform options rename "mapping" property to "fields" which can now be array of field names or dot notation mapping object
- version 1.1.5
  - add xlsx as local package
- version 1.1.4
  - logger configuration changes
- version 1.1.3
  - consistent use of StorageError object
- version 1.1.2
  - xlsx list and codify functionality
  - Elasticsearch and MySQL list functionality
  - use global logger (Winston)
- version 1.1.1
  - fix issue with MySQL null dates
- version 1.1.0
  - implement new xlsx-junction for Excel files
  - implement ftp-filestorage plugin
  - implement FileStorage plugin framework
  - implement Transform plugin framework
  - other code cleanup
  - Breaking changes:
  - StorageJunction.activate() is now asynchronous and returns a promise
  - removed '_' prefix from properties of StorageJunction, StorageReader, StorageWriter base classes unless it truly is a private property
  - rename StorageJunction.scan() to list()
  - refactor codifyWriter to codifyTransform
- version 1.0.5
  - bug fix for StorageResult returning extra array container
- version 1.0.4
  - add support for Elasticsearch object and nested datatypes
  - updated package dependencies to @latest
- version 1.0.3
  - ensure consistent field ordering in .csv and .json output
- version 1.0.2
  - return elasticsearch key(s) for list inserts
- version 1.0.1
  - prevent empty string as elasticsearch key
- version 1.0.0
  - StorageResults now returns an array (list) for row or column stores (tables) and an object (dictionary map) for document and key-value stores. This allows return of data source generated keys while not polluting data objects.  Single data objects will no longer be return.
